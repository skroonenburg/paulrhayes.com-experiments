<!DOCTYPE html>
<html>
<head>
    <!-- Article: http://www.paulrhayes.com/2010-09/3d-css-cube-ii-touch-gestures-click-and-drag/ -->
    <!-- Demo: http://www.paulrhayes.com/experiments/cube-3d/touch.html -->
    <!-- Originally posted: 28th September 2010 -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>3D CSS cube, use arrow keys, touch gestures or click and drag to rotate &mdash; Paul Hayes</title>
    <meta name="author" content="Paul Hayes" />
    <link rel="stylesheet" href="../experiment-styles.css" />

    <link rel="stylesheet" href="css/experiment.css" />    
    <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <script>
        var ws;

        // Support both the WebSocket and MozWebSocket objects
        if ((typeof (WebSocket) == 'undefined') &&
            (typeof (MozWebSocket) != 'undefined')) {
            WebSocket = MozWebSocket;
        }

        // Create the socket with event handlers
        function init() {
            //Create and open the socket
            ws = new WebSocket("ws://localhost:6437/");

            // On successful connection
            ws.onopen = function (event) {
                document.getElementById("main").style.visibility = "visible";
                document.getElementById("connection").innerHTML = "WebSocket connection open!";
            };

            // On message received
            ws.onmessage = function (event) {
                var obj = JSON.parse(event.data);
                if (obj.hands.length > 0) {
                    $('#main').css('zoom', (obj.hands[0].sphereRadius / 100)*2);
                }
                else {
                    
                }
                //var str = JSON.stringify(obj, undefined, 2);
                //document.getElementById("output").innerHTML = '<pre>' + str + '</pre>';
            };

            // On socket close
            ws.onclose = function (event) {
                ws = null;
                document.getElementById("main").style.visibility = "hidden";
                document.getElementById("connection").innerHTML = "WebSocket connection closed";
            }

            //On socket error
            ws.onerror = function (event) {
                alert("Received error");
            };
        }
</script>
</head>
<body class="experiment" onload="init();">
    <div id="connection">WebSocket not connected</div>
    <div class="wrapper">

<article class="viewport" id="main">
    <section class="cube">
        <div></div>
        <div>
            <h2>3D cube</h2>
            <time>28th September 2010</time>
            <p>By Paul Hayes</p>
            <p>3D cube built using css, webkit-perspective and webkit-transform. Rotation via webkit-transition.</p>
            <p>Use arrow keys to navigate, or click and hold mouse. On touch screens, use one finger to rotate. Press ESC to reset.</p>
            <p><a href="http://www.paulrhayes.com/2010-09/3d-css-cube-ii-touch-gestures-click-and-drag/" target="_top">Read more &raquo;</a></p>
        </div>
        <div>
            <!-- video -->
        </div>
        <div>
            <h2><a href="http://www.paulrhayes.com/2009-07/animated-css3-cube-interface-using-3d-transforms/" target="_top">Learn how to make a cube</a></h2>
            <time>17th July 2009</time>
            <p>By Paul Hayes</p>
            <p>&#8220;A 3D cube can be created solely in CSS, with all six faces.&#8221;</p>
            <p>Article: <a href="http://www.paulrhayes.com/2009-07/animated-css3-cube-interface-using-3d-transforms/" target="_top">Cube explanation</a></p>
        </div>
        <div>
            <p>I design and build websites in Brighton</p>
        </div>
        <div>
            <small>Nothing down here.</small>
        </div>
    </section>
</article>
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="js/experiment.js"></script>    </body>
</html>